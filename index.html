<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Trafficsourcetracker.js by marketlytics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Trafficsourcetracker.js</h1>
      <h2 class="project-tagline">A replacement for Google Analytics utmz cookie. This can be used to collect data about source of traffic</h2>
      <a href="https://github.com/marketlytics/trafficSourceTracker.js" class="btn">View on GitHub</a>
      <a href="https://github.com/marketlytics/trafficSourceTracker.js/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/marketlytics/trafficSourceTracker.js/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="trafficsourcetrackerjs" class="anchor" href="#trafficsourcetrackerjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>trafficSourceTracker.js</h1>

<p>A replacement for Google Analytics last non direct click tracking done by __utmz cookie. This can be used to collect data about source of traffic for integration with crm</p>

<p>Google Analytics classic used to provide a handy cookie which contained the traffic source information for the user visiting the site. The data stored in the cookie followed google analytics last non direct click model for traffic attribution and stored the source in a handy format. This was a boon for any marketers looking to integrate traffic source data into 3rd party tools like CRM and other databases.</p>

<p>With the move to universal analytics this source tracking was moved serverside leaving all the existing integrations in a lurch. Google Analytics will eventually discontinue classic analytics. This presented a need for replacement script that followed the default attribution model favored by google analytics. </p>

<h2>
<a id="whats-it-good-for" class="anchor" href="#whats-it-good-for" aria-hidden="true"><span class="octicon octicon-link"></span></a>Whats it good for?</h2>

<ul>
<li>Enhance CRM data with marketing campaigns</li>
<li>Send a bit more context with Contact Form Enquiries</li>
<li>Send traffic source data to another site [affiliate]</li>
</ul>

<p>Some more use cases and approaches can be seen in the <a href="http://marketlytics.com/integrate-traffic-source-in-crm/">launch blog post.</a></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Include the trafficSourceTracker.js file on all pages before <code>&lt;/body&gt;</code> recommended minify it before use.</p>

<p>Or even better deploy it via Google Tag Manager.</p>

<ul>
<li>Setup a custom html tag</li>
<li>Add script.js code to the tag.</li>
<li>Trigger <code>All Pages</code> </li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>As a result on each the following function is available 
<code>getTrafficSrcCookie()</code>
  A global function injected by the script to retrieve the traffic source a/c to the last non-direct click attribution model.</p>

<p>Arguments: 
none</p>

<p>Return:
Returns a javascript object if the cookie is saved. Returns null otherwise. The object returned by this function has following properties:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>ga_source</td>
<td>string</td>
<td>‘direct’, ‘google’ or the source fetched from either the utm_source parameter or <code>document.referrer</code>
</td>
</tr>
<tr>
<td>ga_medium</td>
<td>string</td>
<td>‘(none)’, ‘cpc’, ‘organic’, ‘referral’ or the value fetched from the utm_medium parameter.</td>
</tr>
<tr>
<td>ga_campaign</td>
<td>string</td>
<td>‘(not provided)’ or the utm_term parameter fetched from the parameter or document.referrer.</td>
</tr>
<tr>
<td>ga_content</td>
<td>string</td>
<td>‘’ or fetched from utm_content parameter.</td>
</tr>
<tr>
<td>ga_term</td>
<td>string</td>
<td>keyword data for organic search or fetched from utm_term parameter.</td>
</tr>
<tr>
<td>ga_gclid</td>
<td>string</td>
<td>google adwords click id parameter</td>
</tr>
<tr>
<td>ga_landing_page</td>
<td>string</td>
<td>‘’ or fetched from document.location.href.</td>
</tr>
<tr>
<td>ga_client_id</td>
<td>string</td>
<td>fetched from google universal analytics global object.</td>
</tr>
</tbody>
</table>

<p>Where empty string represents absence of a field.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>todo</h2>

<p>Cross domain tracking: currently a new traffic source is registered when hostname changes for feature parity with google analytics classic cross domain tracking should be added to pass source data between domains.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>This is licensed under the <a href="https://github.com/marketlytics/trafficSource-tracker/blob/master/LICENSE">MIT License</a>. </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/marketlytics/trafficSourceTracker.js">Trafficsourcetracker.js</a> is maintained by <a href="https://github.com/marketlytics">marketlytics</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-18735851-5");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
